<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml"
	      implements="org.bigbluebutton.core.interfaces.IRouterAware"
	      width="400" height="300">
<!--MDIWindow xmlns="flexlib.mdi.containers.*"-->
	<mx:Script>
		<![CDATA[
			import org.bigbluebutton.core.interfaces.Router;
			import mx.utils.ColorUtil;
			import org.bigbluebutton.modules.chat.model.vo.MessageVO;
			import org.bigbluebutton.modules.chat.view.ChatWindowMediator;
			import org.bigbluebutton.modules.chat.model.vo.*;
			
		
			
			public var m:MessageObject;
			[Bindable]
			public var messageVO:MessageVO = new MessageVO();
			public var router : Router;
			
			public function acceptRouter (r:Router) : void
			{
				router = r;
			}
		
			public function showNewMessage(rm : MessageObject):void{
			var newMessage:String;
			newMessage = "<font color=\"#" + rm.color.toString(16) + "\">" + rm.message + "</font>";
			txtChatBox.htmlText += newMessage + "\n";
			txtMsg.text = "";
			}
			
		    
		    public function sendMessages():void{
		   	this.m = new MessageObject(txtMsg.text, cmpColorPicker.selectedColor);
		   	dispatchEvent(new Event(ChatWindowMediator.NEW_MESSAGE));
		    }
		]]>
	</mx:Script>
	
	<mx:TextArea id="txtChatBox" editable="false" width="100%" height="100%"/>
		
	<mx:ApplicationControlBar width="100%" height="10%">
		<mx:TextInput id="txtMsg" width="100%" enter="sendMessages()"/>
		<mx:ColorPicker id="cmpColorPicker" showTextField="false" selectedColor="0x000000"/>
		<mx:Button label="Send" id="send" click="sendMessages()"/>
	    
	</mx:ApplicationControlBar>
</mx:Panel>
