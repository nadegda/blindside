<?xml version="1.0" encoding="utf-8"?>
<view:ListenersClass xmlns:mx="http://www.adobe.com/2006/mxml" 
			xmlns:view="org.blindsideproject.meetme.view.*" 
			xmlns:controller="org.blindsideproject.meetme.control.*">

	<mx:Script>
		<![CDATA[
			import mx.events.DragEvent;
			import flash.events.MouseEvent;
			import mx.core.DragSource;
			import mx.managers.DragManager;
			import mx.controls.Label;
			import mx.collections.ArrayCollection;
			import mx.controls.Image;	

			import org.blindsideproject.views.general.Images;
			import org.blindsideproject.meetme.events.*;	
				
			private var images : Images = new Images();
			
			[Bindable]
			public var dropTargetIcon : Object = images.door_in;
			
			public function dragEnterHandler(event:DragEvent):void
	   		{
	   			var dropTarget : Image = event.currentTarget as Image;
	   			if (event.dragSource.hasFormat('userid'))
	   		
	   			DragManager.acceptDragDrop(dropTarget);
	   		}
	   	
	   		public function dragDropHandler(event:DragEvent):void
	   		{
	   			dropTargetIcon = images.door_open;
	   			
	   			var ejectEvent : EjectUserEvent = new EjectUserEvent(Number(event.dragSource.dataForFormat('userid')));
   				ejectEvent.dispatch();
	   		
	   		}
		]]>
	</mx:Script>

	
	<controller:MeetMeController/>

    	<mx:TileList id="participantsList" height="100%" width="100%" 
        	itemRenderer="org.blindsideproject.meetme.view.MeetMeUserItem"
            maxColumns="1" rowHeight="25" columnWidth="200" 
            dataProvider="{meetMeRoom.dpParticipants}">

    	</mx:TileList>				
    	<mx:ControlBar width="100%">
     	   <mx:Spacer width="100%"/>
    	   <mx:Image id="ejectUserDropTarget" source="{dropTargetIcon}" 
    	   			toolTip="Drop user here to eject."
    	   			dragEnter="dragEnterHandler(event)" dragDrop="dragDropHandler(event)"/>   			
    	</mx:ControlBar>

</view:ListenersClass>
